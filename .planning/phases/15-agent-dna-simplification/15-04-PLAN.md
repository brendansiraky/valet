---
phase: 15-agent-dna-simplification
plan: 04
type: execute
wave: 3
depends_on: ["15-02"]
files_modified:
  - app/components/pipeline-builder/variable-fill-dialog.tsx
  - app/components/pipeline-builder/template-dialog.tsx
  - app/routes/api.pipelines.ts
autonomous: true

must_haves:
  truths:
    - "VariableFillDialog component file deleted"
    - "TemplateDialog component file deleted"
    - "API no longer has create-template or get-template intents"
  artifacts:
    - path: "app/routes/api.pipelines.ts"
      provides: "API without template-related intents"
      min_lines: 80
  key_links: []
---

<objective>
Delete the variable dialog components and remove template-related API endpoints. Complete the cleanup of the variable system.

Purpose: Remove dead code that is no longer used after Plan 03 removes all usages.

Output: Deleted component files, cleaned API route.
</objective>

<execution_context>
@/Users/brendan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brendan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-agent-dna-simplification/15-RESEARCH.md
@.planning/phases/15-agent-dna-simplification/15-02-SUMMARY.md
@.planning/phases/15-agent-dna-simplification/15-03-SUMMARY.md

Reference files:
@app/routes/api.pipelines.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete variable dialog component files</name>
  <files>app/components/pipeline-builder/variable-fill-dialog.tsx, app/components/pipeline-builder/template-dialog.tsx</files>
  <action>
1. Delete the VariableFillDialog component:
   ```bash
   rm app/components/pipeline-builder/variable-fill-dialog.tsx
   ```

2. Delete the TemplateDialog component:
   ```bash
   rm app/components/pipeline-builder/template-dialog.tsx
   ```

3. Verify no remaining imports of these files:
   ```bash
   grep -r "variable-fill-dialog\|template-dialog" app/
   ```
   Should return no results (after Plan 03 removed usages).
  </action>
  <verify>
- Files deleted: `ls app/components/pipeline-builder/` shows no variable-fill-dialog.tsx or template-dialog.tsx
- No dangling imports: `grep -r "variable-fill-dialog\|template-dialog" app/` returns nothing
  </verify>
  <done>
- variable-fill-dialog.tsx deleted
- template-dialog.tsx deleted
- No remaining imports in codebase
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove template intents from API</name>
  <files>app/routes/api.pipelines.ts</files>
  <action>
1. Remove imports for pipelineTemplates and TemplateVariable:
   ```typescript
   // Change from:
   import { db, pipelines, pipelineTemplates } from "~/db";
   import type { FlowData, TemplateVariable } from "~/db/schema/pipelines";
   // To:
   import { db, pipelines } from "~/db";
   import type { FlowData } from "~/db/schema/pipelines";
   ```

2. Remove the "create-template" case (lines 102-145):
   ```typescript
   // DELETE entire case block:
   case "create-template": {
     ...
   }
   ```

3. Remove the "get-template" case (lines 147-170):
   ```typescript
   // DELETE entire case block:
   case "get-template": {
     ...
   }
   ```

The API should now only have: create, update, delete intents.
  </action>
  <verify>
- `npm run typecheck` passes
- No pipelineTemplates import
- No TemplateVariable import
- No "create-template" or "get-template" cases
  </verify>
  <done>
- Template-related imports removed
- create-template intent removed
- get-template intent removed
- API only has create, update, delete intents
  </done>
</task>

</tasks>

<verification>
1. `npm run typecheck` - no type errors
2. Deleted files don't exist
3. No references to deleted files in codebase
4. API still works for create/update/delete operations
</verification>

<success_criteria>
1. variable-fill-dialog.tsx deleted
2. template-dialog.tsx deleted
3. API has no template-related code
4. No TypeScript errors
5. App builds successfully
</success_criteria>

<output>
After completion, create `.planning/phases/15-agent-dna-simplification/15-04-SUMMARY.md`
</output>
